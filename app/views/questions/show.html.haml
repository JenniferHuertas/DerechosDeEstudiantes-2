=image_tag("polygon-top.svg",  :class => "polygon-top")
=render "shared/navbar"

.container.question-container
  .questions
    .row.justify-content-md-center.padding-top
      =image_tag("polygon-answer-right.svg",  :class => "polygon-answer-right")
      .col-md-8
        %a.threedbutton{:href => "#{root_path}"}
          %i.fas.fa-arrow-left=t('.button_back')
      .col-md-4
        =image_tag("paloma.svg")
    .row.justify-content-md-center.text-main
      .col-md-8
        .text-p-tags
          =t('.search_in')
        .tag-search1
          Pregunta
        .tag-search2
          -if session[:search_type]
            =session[:search_type].capitalize
    .row.justify-content-md-center.text-main
      .col-md-8
        .text-title
          =@question.message
    %div.margin-top
    .row.justify-content-md-center
      =image_tag("polygon-answer-left.svg",  :class => "polygon-answer-left")
      .col-md-8
        -@answers.each do |answer|
          -if answer.is_user
            .row
              .col-md-10
                .label-solid-answer
                  .p-answers
                    =answer.message
          -else
            .row
              .col-md-2.center
                =image_tag("answer.svg")
              .col-md-10
                .label-solid-answer
                  .p-answers
                  =answer.message

    %div.margin-top
    .row.justify-content-md-center.center
      .col-md-6
        .text-we-can=t('.we_can')
    .row.justify-content-md-center.center
      .col-md-6
        .row
          .col-md-6
            %a.threedbutton2{:onclick=>"show_form()"}
              =t('.btn_no')
          .col-md-6
            %a.threedbutton2{"data-toggle": "modal", "data-target": "#sendModal"}
              =t('.btn_yes')

    = form_for :question, :url => {:controller => :questions, action: :create} do |f|
      #form-more-help.row.justify-content-md-center.gone
        .col-md-8
          .input-group
            %span
              .text-input=t('.name')
            =f.text_field "name", id: "name", :class => "form-control", value: ""
          .input-group
            %span
              .text-input=t('.email')
            =f.email_field "email", id: "email", :class => "form-control", value: ""
          .input-group
            %span
              .text-input=t('.message')
            =f.text_area "message", id: "message", :class => "form-control", value: ""
          .complain-btn
            %a.threedbutton{id: "send_answer", :submit => "form"}
              =t('.send')

    %div.margin-top
    .row.justify-content-md-center
      .col-md-10
        .label-solid
          .div-title
            .row
              .col-md-6
                .subtext-title
                  Compartir este derecho
                  %hr
              .col-md-6.right
                =image_tag("facebook.svg")
                =image_tag("twitter.svg")
          .row
            .col-md-12
              .text-p
                %p Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.


%footer-answer.sticky-footer.max-parent
  =render "shared/footer"

:javascript
  function show_form(){
    $('#form-more-help').removeClass("gone").addClass("visible");
  }

  $('#send_answer').click(function() {
    if($('#email').val() === "" || $('#message').val() === ""){
      toastr.error('Por favor llena al menos corroe y mensaje', 'Error!')
    }
    else{
      $( "form" ).first().submit();
    }
  });
  $( document ).ready(function() {
    if("#{@message}"=="true"){
      $('#sendModal').modal('show');
    }
  });
